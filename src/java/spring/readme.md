# spring

```admonish info
`Spring` 是为了简化Java开发的一个框架，它通过一系列构建流程解耦了项目中的业务场景，对象，组件，使项目方便维护，同时支持使用各种第三方组件来扩展自己的业务场景。

`Spring`主要提供了，AOP，IOC，DI，声明式事务管理，单元测试，以及各种优秀的组件。
```

## 为什么Spring框架如此流行

由于远古时期直接使用Servlet进行编程导致每个项目的程序启动流程可能都有点不一样，并且开发者还需要去思考复杂的代码间依赖问题，所以就诞生出了`Spring`框架来对应用程序开发实现自动化和规范化，规范化后就能在许多业务中轻松进行组件共享。

### 什么是自动化

自动化就是Spring通过一个流程，来启动一个应用程序，它永远是从流程0加载到流程1，而不是在流程0的时候因为某个用户包的特殊性让它先走流程3然后再回到流程2。

自定义代码启动流程存在着诸多不可靠性，所以我们需要一个大框架，将我们的组件框进去，同时这个在大框架中还可以提供配置支持，生态支持，启动流程支持等等。

### 什么是规范化

我们不可能让一个团队编写出各种项目中都极难复用的代码，所以我们定义了一个协议，想要初始化一个组件，就必须使用xxx来对组件进行初始化，不然就无法享受框架带来的便利性，同时也会因为该组件无法享受框架的便利性让它进行重构或者适配该框架的xxx协议。

## 使用Spring带来的好处

方便解耦，简化开发，Spring框架就是一个大工厂，我们只需要定义工厂中某些组件的运行规则即可，对象间的依赖关系可以交给Spring自行解决。

许多的开源框架都对Spring进行了支持，我们可以直接使用它们所提供的Spring支持包以达成开箱即用的效果，不需要编写过多的代码配置。

降低Java EE组件的使用难度，例如jdbc，javaMail等等，都提供了一系列封装，我们可以直接使用这些更加通用的API来达成我们所想要达成的目标。

AOP编程的支持，Spring提供面向切面编程，可以在不对原有代码进行改动的情况下为它添加拦截和监控等等功能。

声明式事务的支持，只需要对方法进行事务声明，那么即可享受到事务管理，而无需手动管理。

## Spring框架的核心特性

### 依赖注入{{footnote:Dependency Injection又称为DI}}

Spring框架提供了一套强大的依赖注入机制，通过声明类是否为组件，即可自动为其它需要使用到该组件配置同一个实例，可以更好的帮助开发人员管理程序对象之间的依赖关系。

### 切面编程{{footnote:Aspect-Oriented Programming又称为AOP}}

AOP编程的支持，Spring提供面向切面编程，可以在不对原有代码进行改动的情况下为它添加拦截和监控等等功能。

### 数据访问{{footnote:DataAccess}}

Spring提供了丰富的数据库访问功能，包括了JDBC、ORM等。

最出名的还是`SpringData Jpa`和`MyBatis`(这个算半个ORM)

前者专注于Java类型的依赖关系，后者更注重于XML中的SQL语句，当然它有个升级版本MybatisPlus，它也开始关注起了Java模型，但若是复杂SQL场景，它的处理能力也不错，作为Mybatis的增强，它能够实时检测到XML中SQL语句的修改并实时替换运行的SQL（当前SQL无法替换，仅限下一个）。

```admonish info title="悄悄话" collapsible=true
我本人更注重实体与实体的关系，所以我选择exposed来作为ORM框架。
```

### web开发

Spring提供了两个web开发框架，分别是SpringMVC和SpringWebFlux，它们在设计理念上有一些区别，虽然他们都属于web框架。

SpringMVC是基于ServletAPI进行构建的，它使用同步阻塞IO模型来进行请求处理。这意味着每个请求都会阻塞当前线程，直到请求处理完成。因此SpringMVC需要一个包含大量线程的线程池来处理并发请求。而SpringWebFlux是基于响应式模型构建的，它使用异步非阻塞IO来处理请求。这就是说它不会阻塞当前线程，而是使用少量线程的线程池来完成请求的处理。

因为Flux使用的是异步非阻塞的编程模型，所以它使用的线程资源比同步阻塞的要少，并且在高并发下，它的性能可能会比MVC更加高效

WebFlux并不是MVC的替代，它只是另一种编程思想，如果你的项目运行良好，听我的，别动它，WebFlux的编码比较复杂，可以从一些小型的新项目开始做验证。
